foo PROC

PUSH AX
MOV BP,SP
MOV AX,[BP+4]
PUSH AX
MOV AX,0
PUSH AX
POP AX
POP BX
CMP AX,BX
JNE L2
PUSH 1
JMP L1
L2: 
PUSH 0
L1: 
POP AX
CMP AX,0
JE L3
MOV AX,1
PUSH AX
POP BX
POP AX
POP AX
PUSH BX
PUSH AX
RET
JMP L4
L3:

L4:

MOV BP,SP
MOV AX,[BP+4]
PUSH AX
POP AX
MOV BP,SP
MOV [BP+0],AX
PUSH AX
POP BX
MOV BP,SP
MOV AX,[BP+4]
PUSH AX
MOV AX,1
PUSH AX
POP AX
POP BX
SUB BX,AX
PUSH BX
CALL foo
POP BX
POP AX
PUSH BX
MOV BP,SP
MOV AX,[BP+2]
PUSH AX
POP AX
POP BX
ADD AX,BX
PUSH AX
POP BX
POP AX
POP AX
PUSH BX
PUSH AX
RET

foo ENDP

main PROC

MOV AX,@DATA
MOV DS,AX
PUSH AX
MOV AX,7
PUSH AX
CALL foo
POP BX
POP AX
PUSH BX
POP AX
MOV BP,SP
MOV [BP+0],AX
PUSH AX
POP BX
MOV BP,SP
MOV AX,[BP+0]
PUSH AX
CALL PRINTLN
MOV AX,0
PUSH AX
MOV AX,4CH
INT 21H

main ENDP

END main
